var pngx_update_license=pngx_update_license||{};!function(n,e){"use strict";e.fields="",e.init=function(){e.license()},e.license=function(){n(".pngx-list-license-button").on("click",function(s){s.preventDefault();var i=n(this).closest(".pngx-license-list-key-wrap"),t=n(i).find(".pngx_plugin_slug").val(),a=n(i).find(".pngx_deactivate_link").val(),c=n(i).find(".pngx_deactivate_link_msg").val();setTimeout(function(){e.start_spin(i);var s={action:"pngx_license_update",pngx_license_nonce:pngx_license.nonce,license_inputs:n(i).find(" .pngx-license-field").serialize()};e.update_license(s,i,t,a,c)},500)})},e.update_license=function(s,i,t,a,c){if(!s)return e.stop_spin(i),!1;var l,p,d,g;n.post(pngx_license.ajaxurl,s,function(e){g=e.data.action;var s=n("[data-slug="+t+"]");"deactivate_license"===g?(p='<span class="pngx-success-msg">'+e.data.license_status+"</span>",n(s).find(".row-actions .deactivate").text(c),n(i).find(".pngx-license-field").prop("readonly",!0)):"activate_license"===g&&(p='<span class="pngx-error-msg">'+e.data.license_status+"</span>",n(s).find(".row-actions .deactivate").html(a),n(i).find(".pngx-license-field").prop("readonly",!1)),n(i).find(".pngx_license_action").val(g),n(i).find(".pngx-license-field-msg").html(p),d=e.data.button,n(i).find(".pngx-list-license-button").text(d),e.success?(l='<span class="pngx-success-msg">'+e.data.message+"</span>",n(i).find(".pngx-license-field-result-msg").html(l).fadeIn()):(l='<span class="pngx-error-msg">'+e.data.message+"</span>",n(i).find(".pngx-license-field-result-msg").html(l).fadeIn())},"json").complete(function(){e.stop_spin(i)})},e.start_spin=function(e){n(e).find("#pngx-loading").show()},e.stop_spin=function(e){n(e).find("#pngx-loading").hide()},n(function(){e.init()})}(jQuery,pngx_update_license);