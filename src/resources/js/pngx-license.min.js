var pngx_update_license=pngx_update_license||{};!function(n,e){"use strict";e.fields="",e.init=function(){e.license()},e.license=function(){n(".pngx-list-license-button").on("click",function(i){i.preventDefault();var s=n(this).closest(".pngx-license-list-key-wrap"),t=n(s).find(".pngx_plugin_slug").val(),a=n(s).find(".pngx_deactivate_link").val(),l=n(s).find(".pngx_deactivate_link_msg").val();setTimeout(function(){e.start_spin(s);var i={action:"pngx_license_update",pngx_license_nonce:pngx_license.nonce,license_inputs:n(s).find(" .pngx-license-field").serialize()};e.update_license(i,s,t,a,l)},500)})},e.update_license=function(i,s,t,a,l){if(!i)return e.stop_spin(s),!1;var c,p,d,o;n.post(pngx_license.ajaxurl,i,function(e){o=e.data.action;var i=n("[data-slug="+t+"]"),g="pngx-success-msg";e.data.remote_error&&(g="pngx-error-msg"),"deactivate_license"===o?(p='<span class="'+g+'">'+e.data.license_status+"</span>",n(i).find(".row-actions .deactivate").text(l),n(s).find(".pngx-license-field").prop("readonly",!0)):"activate_license"===o&&(p='<span class="pngx-error-msg">'+e.data.license_status+"</span>",n(i).find(".row-actions .deactivate").html(a),n(s).find(".pngx-license-field").prop("readonly",!1)),n(s).find(".pngx_license_action").val(o),n(s).find(".pngx-license-field-msg").html(p),d=e.data.button,n(s).find(".pngx-list-license-button").text(d),e.success?(c='<span class="'+g+'">'+e.data.message+"</span>",n(s).find(".pngx-license-field-result-msg").html(c).fadeIn()):(c='<span class="pngx-error-msg">'+e.data.message+"</span>",n(s).find(".pngx-license-field-result-msg").html(c).fadeIn())},"json").complete(function(){e.stop_spin(s)})},e.start_spin=function(e){n(e).find("#pngx-loading").show()},e.stop_spin=function(e){n(e).find("#pngx-loading").hide()},n(function(){e.init()})}(jQuery,pngx_update_license);