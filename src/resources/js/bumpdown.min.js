!function(n,t,e){"use strict";var r=n(document);n.fn.bumpdown=function(){var e=n(document),r={ID:"pngx-bumpdown-",data_trigger:function(n){return'[data-trigger="'+n+'"]'},bumpdown:".pngx-bumpdown",content:".pngx-bumpdown-content",trigger:".pngx-bumpdown-trigger",hover_trigger:".pngx-bumpdown-trigger:not(.pngx-bumpdown-nohover)",close:".pngx-bumpdown-close",permanent:".pngx-bumpdown-permanent",active:".pngx-bumpdown-active"},o={open:function(t){var e=t.data("bumpdown"),i=e.$trigger.data("width-rule");if(!t.is(":visible")){e.$trigger.addClass(r.active.replace(".",""));var a=t.find(r.content);if("string"==typeof i&&"all-triggers"===i){var d=600,p=0;n(r.trigger).each(function(){var t=n(this);if(t.data("width-rule")){var e=t.position();e.left>p&&(p=e.left)}}),p&&(p=p>d?p:d,a.css("max-width",p+"px"))}a.prepend('<a class="pngx-bumpdown-close" title="Close"><i class="dashicons dashicons-no"></i></a>'),a.prepend('<span class="pngx-bumpdown-arrow"></span>'),o.arrow(t),t.data("preventClose",!0),t.slideDown("fast",function(){t.data("preventClose",!1)})}},close:function(t){var e=t.data("bumpdown");t.is(":visible")&&!t.data("preventClose")&&(n(this).removeData("is_hoverintent_queued"),t.find(".pngx-bumpdown-close, .pngx-bumpdown-arrow").remove(),t.not(".pngx-bumpdown-trigger").slideUp("fast"),e.$trigger.removeClass(r.active.replace(".","")))},arrow:function(n){var t,e=n.data("bumpdown");t=Math.ceil(e.$trigger.position().left-("block"===e.type?e.$parent.offset().left:0)),e.$bumpdown.find(".pngx-bumpdown-arrow").css("left",t)}};return n(window).on({"resize.bumpdown":function(){e.find(r.active).each(function(){o.arrow(n(this))})}}),e.hoverIntent({over:function(){var t=n(this).data("bumpdown");t.$trigger.data("is_hoverintent_queued",!1),t.$bumpdown.trigger("open.bumpdown")},out:function(){},selector:r.hover_trigger,interval:200}).on({mouseenter:function(){void 0===n(this).data("is_hoverintent_queued")&&n(this).data("is_hoverintent_queued",!0)},click:function(t){var e=n(this).data("bumpdown");if(t.preventDefault(),t.stopPropagation(),e.$bumpdown.is(":visible")){if(e.$trigger.data("is_hoverintent_queued"))return e.$trigger.data("is_hoverintent_queued",!1);e.$bumpdown.trigger("close.bumpdown")}else e.$bumpdown.trigger("open.bumpdown")},"open.bumpdown":function(){o.open(n(this))},"close.bumpdown":function(){o.close(n(this))}},r.trigger).on({click:function(t){var e=n(this).parents(r.bumpdown).first().data("bumpdown");t.preventDefault(),t.stopPropagation(),"undefined"!=typeof e&&"undefined"!=typeof e.$bumpdown&&e.$bumpdown.trigger("close.bumpdown")}},r.close).on("click",function(t){var e=n(t.target),o=e.is(r.bumpdown)||0!==e.parents(r.bumpdown).length;o||n(r.trigger).not(r.permanent).trigger("close.bumpdown")}).on({"open.bumpdown":function(){o.open(n(this))},"close.bumpdown":function(){o.close(n(this))}},r.bumpdown),this.each(function(){var e={$trigger:n(this),$parent:null,$bumpdown:null,ID:null,html:null,type:"block",is_permanent:!1};if(e.ID=e.$trigger.attr("id"),e.ID||(e.ID=t.uniqueId(r.ID),e.$trigger.attr("id",e.ID)),e.html=e.$trigger.attr("data-bumpdown"),e.html='<div class="pngx-bumpdown-content">'+e.html+"</div>",e["class"]=e.$trigger.attr("data-bumpdown-class"),e.is_permanent=e.$trigger.is(r.permanent),e.$parent=e.$trigger.parents().filter(function(){return-1<n.inArray(n(this).css("display"),["block","table","table-cell","table-row"])}).first(),e.html)if(e.type=e.$parent.is("td, tr, td, table")?"table":"block","table"===e.type){e.$bumpdown=n("<td>").attr({colspan:2}).addClass("pngx-bumpdown-cell").html(e.html);var i=e["class"]?"pngx-bumpdown-row "+e["class"]:"pngx-bumpdown-row",a=n("<tr>").append(e.$bumpdown).addClass(i);e.$parent=e.$trigger.parents("tr").first(),e.$parent.after(a)}else e.$bumpdown=n("<div>").addClass("pngx-bumpdown-block").html(e.html),e.$trigger.after(e.$bumpdown);else e.$bumpdown=n(r.data_trigger(e.ID)),e.type="block";if(e.$trigger.data("bumpdown",e).addClass(r.trigger.replace(".","")),e.$bumpdown.data("bumpdown",e).addClass(r.bumpdown.replace(".","")),e.$trigger.data("depends")){var d=e.$trigger.data("depends");n(document).on("change",d,function(){o.close(e.$bumpdown)})}})},e.run=function(t){n(".pngx-bumpdown-trigger").bumpdown()},r.ready(e.run),r.on("pngx.bumpdown-run",e.run)}(jQuery,window.underscore||window._,{});